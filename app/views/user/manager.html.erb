<% if current_user.admin? %>
  <div class="card">
    <div class="card-header">
      <%= check_box_tag :select_all, nil, false, id: 'select-all-checkbox' %> All
    </div>
    <div class="card-body">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">
              <%= check_box_tag :select_all, nil, false, id: 'select-all-checkbox' %>
            </th>
            <th scope="col"><%= t('name') %></th>
            <th scope="col"><%= t('email') %></th>
            <th scope="col"><%= t('role') %></th>
            <th scope="col"><%= t('status') %></th>
            <th scope="col"><%= t('action') %></th>
          </tr>
        </thead>
        <tbody>
          <% @user.each do |user| %>
            <tr>
              <td>
                <%= check_box_tag 'selected_user_ids[]', user.id, false, class: 'user-checkbox' %>
              </td>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td><%= user.admin ? t('admin') :  t('user') %></td>
              <td><%= user.status ? t('active') : t('blocked') %></td>
              <td>
                <%= button_to t('block'), block_user_path(user), method: :put, class: 'btn btn-sm btn-danger' if user.status %>
                <%= button_to t('unblock'), unblock_user_path(user), method: :put, class: 'btn btn-sm btn-success' unless user.status %>
                <%= button_to t('add_admin'), add_admin_user_path(user), method: :put, class: 'btn btn-sm btn-primary' unless user.admin %>
                <%= button_to t('remove_admin'), remove_admin_user_path(user), method: :put, class: 'btn btn-sm btn-warning' if user.admin %>
                <%= button_to t('delete'), delete_user_path(user), method: :delete, class: 'btn btn-sm btn-danger', data: { confirm: 'Are you sure?' } %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <div class="alert alert-danger" role="alert">
    You are not authorized to access this page.
  </div>
<% end %>

