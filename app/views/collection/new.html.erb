<%= form_with(model: @collection, url: collection_index_path, local: true, html: { class: "row g-3" }) do |form| %>
  <div class="form-group">
    <%= form.label :name %>
    <%= form.text_field :name, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :description %>
    <%= form.text_area :description, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :category %>
    <%= form.select :category, Collection::CATEGORIES, {}, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :image %>
    <%= form.file_field :image, class: "form-control" %>
  </div>

  <h3>Custom Fields</h3>
  <%= form.fields_for :custom_fields, OpenStruct.new(@collection.custom_fields || {}) do |cf| %>
    <% 3.times do |i| %>
      <div class="field">
        <%= cf.label "field_name_#{i + 1}", "Field Name #{i + 1}" %>
        <%= cf.text_field "field_name_#{i + 1}", name: "collection[custom_fields][field_name_#{i + 1}]", class: "form-control" %>
      </div>
    <% end %>
  <% end %>

  <div class="form-group">
    <%= form.submit "Save Collection", class: "btn btn-primary" %>
  </div>
<% end %>
